import{a as G,b as S,c as J,d as Q,e as B,f as P,P as k,B as Y,g as w}from"./app-274a47d1.js";import{r as g,h as x,c as $,B as _,D as ee,H as te,o as ae,C as se,j as e,R as M,w as le,p as oe,i as ne}from"./framework-9bf4c1fc.js";const ce="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";const X=()=>e(k,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));X.displayName="CloseIcon";const A=()=>e(k,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));A.displayName="HeadingIcon";const E=()=>e(k,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));E.displayName="HeartIcon";const I=()=>e(k,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));I.displayName="HistoryIcon";const q=()=>e(k,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));q.displayName="TitleIcon";const re={},ie=300,N=5,ue={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},he="search-pro-history-results",f=G(he,[]),pe=()=>({history:f,addHistory:a=>{f.value.length<N?f.value=[a,...f.value]:f.value=[a,...f.value.slice(0,N-1)]},removeHistory:a=>{f.value=[...f.value.slice(0,a),...f.value.slice(a+1)]}}),ve=g(ce),de=x(()=>JSON.parse(Y(ve.value))),z=(a,h)=>{const p=a.toLowerCase(),s=h.toLowerCase(),n=[];let l=0,u=0;const v=(t,d=!1)=>{let o="";u===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+u>100?`${t.slice(0,100-u)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&n.push(o),u+=o.length,d||(n.push(["strong",h]),u+=h.length,u>=100&&n.push(" …"))};let m=p.indexOf(s,l);if(m===-1)return null;for(;m>=0;){const t=m+s.length;if(v(a.slice(l,m)),l=t,u>100)break;m=p.indexOf(s,l)}return u<100&&v(a.slice(l),!0),n},T=a=>a.reduce((h,{type:p})=>h+(p==="title"?50:p==="heading"?20:p==="custom"?10:1),0),me=(a,h)=>{var p;const s={};for(const[n,l]of Object.entries(h)){const u=((p=h[n.replace(/\/[^\\]*$/,"")])==null?void 0:p.title)||"",v=`${u?`${u} > `:""}${l.title}`,m=z(l.title,a);m&&(s[v]=[...s[v]||[],{type:"title",path:n,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const c=z(o,a);c&&(s[v]=[...s[v]||[],{type:"custom",path:n,index:t,display:c}])})});for(const t of l.contents){const d=z(t.header,a);d&&(s[v]=[...s[v]||[],{type:"heading",path:n+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const c=z(o,a);c&&(s[v]=[...s[v]||[],{type:"content",header:t.header,path:n+(t.slug?`#${t.slug}`:""),display:c}])}}}return Object.keys(s).sort((n,l)=>T(s[n])-T(s[l])).map(n=>({title:n,contents:s[n]}))},ye=a=>{const h=S(),p=g([]),s=x(()=>de.value[h.value]),n=w(l=>{p.value=l?me(l,s.value):[]},ie);return le([a,h],()=>{n(a.value)}),p};var ge=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:h}){const p=_(),s=ee(),n=S(),l=J(ue),{history:u,addHistory:v,removeHistory:m}=pe(),t=te(a,"query"),d=ye(t),o=g(0),c=g(0),j=g(),L=x(()=>d.value.length>0),O=x(()=>d.value[o.value]||null),D=()=>{o.value=o.value>0?o.value-1:d.value.length-1,c.value=O.value.contents.length-1},Z=()=>{o.value=o.value<d.value.length-1?o.value+1:0,c.value=0},K=()=>{c.value<O.value.contents.length-1?c.value=c.value+1:Z()},R=()=>{c.value>0?c.value=c.value-1:D()},V=r=>r.map(i=>ne(i)?i:e(i[0],i[1])),W=r=>{if(r.type==="custom"){const i=re[r.index]||"$content",[H,U=""]=oe(i)?i[n.value].split("$content"):i.split("$content");return V([H,...r.display,U])}return V(r.display)},b=()=>{o.value=0,c.value=0,h("updateQuery",""),h("close")};return ae(()=>{Q("keydown",r=>{if(L.value){if(r.key==="ArrowUp")R();else if(r.key==="ArrowDown")K();else if(r.key==="Enter"){const i=O.value.contents[c.value];s.path!==i.path&&(v(i),p.push(i.path),b())}}}),B(j.value,{reserveScrollBarGap:!0})}),se(()=>{P()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!L.value}],ref:j},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((r,i)=>e(M,{to:r.path,class:["search-pro-result-item",{active:c.value===i}],onClick:()=>{console.log("click"),b()}},()=>[e(I,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[r.type==="content"&&r.header?e("div",{class:"content-header"},r.header):null,e("div",W(r))]),e("button",{class:"search-pro-close-icon",onClick:H=>{H.preventDefault(),H.stopPropagation(),m(i)}},e(X))]))])):l.value.emptyHistory:L.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:r,contents:i},H)=>{const U=o.value===H;return e("li",{class:["search-pro-result-list-item",{active:U}]},[e("div",{class:"search-pro-result-title"},r||"Documentation"),i.map((y,C)=>{const F=U&&c.value===C;return e(M,{to:y.path,class:["search-pro-result-item",{active:F,"aria-selected":F}],onClick:()=>{v(y),b()}},()=>[y.type==="content"?null:e(y.type==="title"?q:y.type==="heading"?A:E,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",W(y))])])})])})):l.value.emptyResult)}});export{ge as default};
