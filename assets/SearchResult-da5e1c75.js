import{a as J,b as X,c as Y,d as C,e as F,f as P,P as g,B as Q,g as G}from"./app-c577148a.js";import{r as z,h as R,c as $,B as _,D as ee,H as te,o as se,C as le,j as e,R as b,w as ae,p as ce,i as oe}from"./framework-9bf4c1fc.js";const ne="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";const j=()=>e(g,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));j.displayName="CloseIcon";const H=()=>e(g,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));H.displayName="HeadingIcon";const S=()=>e(g,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));S.displayName="HeartIcon";const Z=()=>e(g,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));Z.displayName="HistoryIcon";const w=()=>e(g,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));w.displayName="TitleIcon";const ie={},ue=300,I=5,re={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},pe="search-pro-history-results",A=J(pe,[]),he=()=>({history:A,addHistory:s=>{A.value.length<I?A.value=[s,...A.value]:A.value=[s,...A.value.slice(0,I-1)]},removeHistory:s=>{A.value=[...A.value.slice(0,s),...A.value.slice(s+1)]}}),de=z(ne),ye=R(()=>JSON.parse(Q(de.value))),L=(s,p)=>{const h=s.toLowerCase(),l=p.toLowerCase(),o=[];let a=0,r=0;const d=(t,y=!1)=>{let c="";r===0?c=t.length>20?`… ${t.slice(-20)}`:t:y?c=t.length+r>100?`${t.slice(0,100-r)}… `:t:c=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,c&&o.push(c),r+=c.length,y||(o.push(["strong",p]),r+=p.length,r>=100&&o.push(" …"))};let v=h.indexOf(l,a);if(v===-1)return null;for(;v>=0;){const t=v+l.length;if(d(s.slice(a,v)),a=t,r>100)break;v=h.indexOf(l,a)}return r<100&&d(s.slice(a),!0),o},U=s=>s.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),ve=(s,p)=>{var h;const l={};for(const[o,a]of Object.entries(p)){const r=((h=p[o.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",d=`${r?`${r} > `:""}${a.title}`,v=L(a.title,s);v&&(l[d]=[...l[d]||[],{type:"title",path:o,display:v}]),a.customFields&&Object.entries(a.customFields).forEach(([t,y])=>{y.forEach(c=>{const n=L(c,s);n&&(l[d]=[...l[d]||[],{type:"custom",path:o,index:t,display:n}])})});for(const t of a.contents){const y=L(t.header,s);y&&(l[d]=[...l[d]||[],{type:"heading",path:o+(t.slug?`#${t.slug}`:""),display:y}]);for(const c of t.contents){const n=L(c,s);n&&(l[d]=[...l[d]||[],{type:"content",header:t.header,path:o+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(l).sort((o,a)=>U(l[o])-U(l[a])).map(o=>({title:o,contents:l[o]}))},me=s=>{const p=X(),h=z([]),l=R(()=>ye.value[p.value]),o=G(a=>{h.value=a?ve(a,l.value):[]},ue);return ae([s,p],()=>{o(s.value)}),h};var ze=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:s=>!0},setup(s,{emit:p}){const h=_(),l=ee(),o=X(),a=Y(re),{history:r,addHistory:d,removeHistory:v}=he(),t=te(s,"query"),y=me(t),c=z(0),n=z(0),K=z(),V=R(()=>y.value.length>0),D=R(()=>y.value[c.value]||null),M=()=>{c.value=c.value>0?c.value-1:y.value.length-1,n.value=D.value.contents.length-1},B=()=>{c.value=c.value<y.value.length-1?c.value+1:0,n.value=0},E=()=>{n.value<D.value.contents.length-1?n.value=n.value+1:B()},x=()=>{n.value>0?n.value=n.value-1:M()},O=i=>i.map(u=>oe(u)?u:e(u[0],u[1])),T=i=>{if(i.type==="custom"){const u=ie[i.index]||"$content",[q,f=""]=ce(u)?u[o.value].split("$content"):u.split("$content");return O([q,...i.display,f])}return O(i.display)},k=()=>{c.value=0,n.value=0,p("updateQuery",""),p("close")};return se(()=>{C("keydown",i=>{if(V.value){if(i.key==="ArrowUp")x();else if(i.key==="ArrowDown")E();else if(i.key==="Enter"){const u=D.value.contents[n.value];l.path!==u.path&&(d(u),h.push(u.path),k())}}}),F(K.value,{reserveScrollBarGap:!0})}),le(()=>{P()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?r.value.length===0:!V.value}],ref:K},t.value===""?r.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},a.value.history),r.value.map((i,u)=>e(b,{to:i.path,class:["search-pro-result-item",{active:n.value===u}],onClick:()=>{console.log("click"),k()}},()=>[e(Z,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[i.type==="content"&&i.header?e("div",{class:"content-header"},i.header):null,e("div",T(i))]),e("button",{class:"search-pro-close-icon",onClick:q=>{q.preventDefault(),q.stopPropagation(),v(u)}},e(j))]))])):a.value.emptyHistory:V.value?e("ul",{class:"search-pro-result-list"},y.value.map(({title:i,contents:u},q)=>{const f=c.value===q;return e("li",{class:["search-pro-result-list-item",{active:f}]},[e("div",{class:"search-pro-result-title"},i||"Documentation"),u.map((m,N)=>{const W=f&&n.value===N;return e(b,{to:m.path,class:["search-pro-result-item",{active:W,"aria-selected":W}],onClick:()=>{d(m),k()}},()=>[m.type==="content"?null:e(m.type==="title"?w:m.type==="heading"?H:S,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[m.type==="content"&&m.header?e("div",{class:"content-header"},m.header):null,e("div",T(m))])])})])})):a.value.emptyResult)}});export{ze as default};
