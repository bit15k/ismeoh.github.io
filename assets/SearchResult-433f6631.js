import{a as Q,b as X,c as W,d as S,e as Z,f as C,P as G,B as F,g as Y}from"./app-d47414c3.js";import{r as D,h as b,c as $,B as _,D as ee,H as te,o as ae,C as se,j as e,R as k,w as le,p as ne,i as oe}from"./framework-9bf4c1fc.js";const ce="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";const B=()=>e(G,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));B.displayName="CloseIcon";const J=()=>e(G,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));J.displayName="HeadingIcon";const P=()=>e(G,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));P.displayName="HeartIcon";const j=()=>e(G,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));j.displayName="HistoryIcon";const w=()=>e(G,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));w.displayName="TitleIcon";const ie={},re=300,O=5,ue={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},pe="search-pro-history-results",g=Q(pe,[]),he=()=>({history:g,addHistory:a=>{g.value.length<O?g.value=[a,...g.value]:g.value=[a,...g.value.slice(0,O-1)]},removeHistory:a=>{g.value=[...g.value.slice(0,a),...g.value.slice(a+1)]}}),ve=D(ce),de=b(()=>JSON.parse(F(ve.value))),R=(a,p)=>{const h=a.toLowerCase(),s=p.toLowerCase(),o=[];let l=0,u=0;const v=(t,d=!1)=>{let n="";u===0?n=t.length>20?`… ${t.slice(-20)}`:t:d?n=t.length+u>100?`${t.slice(0,100-u)}… `:t:n=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,n&&o.push(n),u+=n.length,d||(o.push(["strong",p]),u+=p.length,u>=100&&o.push(" …"))};let m=h.indexOf(s,l);if(m===-1)return null;for(;m>=0;){const t=m+s.length;if(v(a.slice(l,m)),l=t,u>100)break;m=h.indexOf(s,l)}return u<100&&v(a.slice(l),!0),o},x=a=>a.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),me=(a,p)=>{var h;const s={};for(const[o,l]of Object.entries(p)){const u=((h=p[o.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${u?`${u} > `:""}${l.title}`,m=R(l.title,a);m&&(s[v]=[...s[v]||[],{type:"title",path:o,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(n=>{const c=R(n,a);c&&(s[v]=[...s[v]||[],{type:"custom",path:o,index:t,display:c}])})});for(const t of l.contents){const d=R(t.header,a);d&&(s[v]=[...s[v]||[],{type:"heading",path:o+(t.slug?`#${t.slug}`:""),display:d}]);for(const n of t.contents){const c=R(n,a);c&&(s[v]=[...s[v]||[],{type:"content",header:t.header,path:o+(t.slug?`#${t.slug}`:""),display:c}])}}}return Object.keys(s).sort((o,l)=>x(s[o])-x(s[l])).map(o=>({title:o,contents:s[o]}))},ye=a=>{const p=X(),h=D([]),s=b(()=>de.value[p.value]),o=Y(l=>{h.value=l?me(l,s.value):[]},re);return le([a,p],()=>{o(a.value)}),h};var De=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const h=_(),s=ee(),o=X(),l=W(ue),{history:u,addHistory:v,removeHistory:m}=he(),t=te(a,"query"),d=ye(t),n=D(0),c=D(0),U=D(),V=b(()=>d.value.length>0),q=b(()=>d.value[n.value]||null),L=()=>{n.value=n.value>0?n.value-1:d.value.length-1,c.value=q.value.contents.length-1},A=()=>{n.value=n.value<d.value.length-1?n.value+1:0,c.value=0},K=()=>{c.value<q.value.contents.length-1?c.value=c.value+1:A()},N=()=>{c.value>0?c.value=c.value-1:L()},E=i=>i.map(r=>oe(r)?r:e(r[0],r[1])),I=i=>{if(i.type==="custom"){const r=ie[i.index]||"$content",[H,f=""]=ne(r)?r[o.value].split("$content"):r.split("$content");return E([H,...i.display,f])}return E(i.display)},z=()=>{n.value=0,c.value=0,p("updateQuery",""),p("close")};return ae(()=>{S("keydown",i=>{if(V.value){if(i.key==="ArrowUp")N();else if(i.key==="ArrowDown")K();else if(i.key==="Enter"){const r=q.value.contents[c.value];s.path!==r.path&&(v(r),h.push(r.path),z())}}}),Z(U.value,{reserveScrollBarGap:!0})}),se(()=>{C()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?u.value.length===0:!V.value}],ref:U},t.value===""?u.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),u.value.map((i,r)=>e(k,{to:i.path,class:["search-pro-result-item",{active:c.value===r}],onClick:()=>{console.log("click"),z()}},()=>[e(j,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[i.type==="content"&&i.header?e("div",{class:"content-header"},i.header):null,e("div",I(i))]),e("button",{class:"search-pro-close-icon",onClick:H=>{H.preventDefault(),H.stopPropagation(),m(r)}},e(B))]))])):l.value.emptyHistory:V.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:i,contents:r},H)=>{const f=n.value===H;return e("li",{class:["search-pro-result-list-item",{active:f}]},[e("div",{class:"search-pro-result-title"},i||"Documentation"),r.map((y,T)=>{const M=f&&c.value===T;return e(k,{to:y.path,class:["search-pro-result-item",{active:M,"aria-selected":M}],onClick:()=>{v(y),z()}},()=>[y.type==="content"?null:e(y.type==="title"?w:y.type==="heading"?J:P,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",I(y))])])})])})):l.value.emptyResult)}});export{De as default};
