import{a as w,b as I,c as C,d as X,e as F,f as P,P as q,B as T,g as Y}from"./app-1dfb0d11.js";import{r as f,h as z,c as $,B as _,D as ee,H as te,o as ae,C as se,j as e,R as U,w as le,p as oe,i as ce}from"./framework-9bf4c1fc.js";const ne="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";const M=()=>e(q,{name:"close"},()=>e("path",{d:"m925.468 822.294-303.27-310.288L925.51 201.674c34.683-27.842 38.3-75.802 8.122-107.217-30.135-31.37-82.733-34.259-117.408-6.463L512.001 399.257 207.777 87.993C173.1 60.197 120.504 63.087 90.369 94.456c-30.179 31.415-26.561 79.376 8.122 107.217L401.8 512.005l-303.27 310.29c-34.724 27.82-38.34 75.846-8.117 107.194 30.135 31.437 82.729 34.327 117.408 6.486L512 624.756l304.177 311.22c34.68 27.84 87.272 24.95 117.408-6.487 30.223-31.348 26.56-79.375-8.118-107.195z"}));M.displayName="CloseIcon";const j=()=>e(q,{name:"heading"},()=>e("path",{d:"M250.4 704.6H64V595.4h202.4l26.2-166.6H94V319.6h214.4L352 64h127.8l-43.6 255.4h211.2L691 64h126.2l-43.6 255.4H960v109.2H756.2l-24.6 166.6H930v109.2H717L672 960H545.8l43.6-255.4H376.6L333 960H206.8l43.6-255.4zm168.4-276L394 595.4h211.2l24.6-166.6h-211z"}));j.displayName="HeadingIcon";const x=()=>e(q,{name:"heart"},()=>e("path",{d:"M1024 358.156C1024 195.698 892.3 64 729.844 64c-86.362 0-164.03 37.218-217.844 96.49C458.186 101.218 380.518 64 294.156 64 131.698 64 0 195.698 0 358.156 0 444.518 37.218 522.186 96.49 576H96l320 320c32 32 64 64 96 64s64-32 96-64l320-320h-.49c59.272-53.814 96.49-131.482 96.49-217.844zM841.468 481.232 517.49 805.49a2981.962 2981.962 0 0 1-5.49 5.48c-1.96-1.95-3.814-3.802-5.49-5.48L182.532 481.234C147.366 449.306 128 405.596 128 358.156 128 266.538 202.538 192 294.156 192c47.44 0 91.15 19.366 123.076 54.532L512 350.912l94.768-104.378C638.696 211.366 682.404 192 729.844 192 821.462 192 896 266.538 896 358.156c0 47.44-19.368 91.15-54.532 123.076z"}));x.displayName="HeartIcon";const N=()=>e(q,{name:"history"},()=>e("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-896a384 384 0 1 0 384 384 384 384 0 0 0-384-384zm192 448H512a64 64 0 0 1-64-64V320a64 64 0 0 1 128 0v128h128a64 64 0 0 1 0 128z"}));N.displayName="HistoryIcon";const Q=()=>e(q,{name:"title"},()=>e("path",{d:"M512 256c70.656 0 134.656 28.672 180.992 75.008A254.933 254.933 0 0 1 768 512c0 83.968-41.024 157.888-103.488 204.48C688.96 748.736 704 788.48 704 832c0 105.984-86.016 192-192 192-106.048 0-192-86.016-192-192h128a64 64 0 1 0 128 0 64 64 0 0 0-64-64 255.19 255.19 0 0 1-181.056-75.008A255.403 255.403 0 0 1 256 512c0-83.968 41.024-157.824 103.488-204.544C335.04 275.264 320 235.584 320 192A192 192 0 0 1 512 0c105.984 0 192 85.952 192 192H576a64.021 64.021 0 0 0-128 0c0 35.328 28.672 64 64 64zM384 512c0 70.656 57.344 128 128 128s128-57.344 128-128-57.344-128-128-128-128 57.344-128 128z"}));Q.displayName="TitleIcon";const ue={},re=300,D=5,ie={"/":{cancel:"取消",placeholder:"搜索",search:"搜索",select:"选择",navigate:"切换",exit:"关闭",history:"搜索历史",emptyHistory:"无搜索历史",emptyResult:"没有找到结果",loading:"正在加载搜索索引..."}},pe="search-pro-history-results",L=w(pe,[]),he=()=>({history:L,addHistory:a=>{L.value.length<D?L.value=[a,...L.value]:L.value=[a,...L.value.slice(0,D-1)]},removeHistory:a=>{L.value=[...L.value.slice(0,a),...L.value.slice(a+1)]}}),ve=f(ne),de=z(()=>JSON.parse(T(ve.value))),b=(a,p)=>{const h=a.toLowerCase(),s=p.toLowerCase(),c=[];let l=0,i=0;const v=(t,d=!1)=>{let o="";i===0?o=t.length>20?`… ${t.slice(-20)}`:t:d?o=t.length+i>100?`${t.slice(0,100-i)}… `:t:o=t.length>20?`${t.slice(0,20)} … ${t.slice(-20)}`:t,o&&c.push(o),i+=o.length,d||(c.push(["strong",p]),i+=p.length,i>=100&&c.push(" …"))};let m=h.indexOf(s,l);if(m===-1)return null;for(;m>=0;){const t=m+s.length;if(v(a.slice(l,m)),l=t,i>100)break;m=h.indexOf(s,l)}return i<100&&v(a.slice(l),!0),c},E=a=>a.reduce((p,{type:h})=>p+(h==="title"?50:h==="heading"?20:h==="custom"?10:1),0),me=(a,p)=>{var h;const s={};for(const[c,l]of Object.entries(p)){const i=((h=p[c.replace(/\/[^\\]*$/,"")])==null?void 0:h.title)||"",v=`${i?`${i} > `:""}${l.title}`,m=b(l.title,a);m&&(s[v]=[...s[v]||[],{type:"title",path:c,display:m}]),l.customFields&&Object.entries(l.customFields).forEach(([t,d])=>{d.forEach(o=>{const n=b(o,a);n&&(s[v]=[...s[v]||[],{type:"custom",path:c,index:t,display:n}])})});for(const t of l.contents){const d=b(t.header,a);d&&(s[v]=[...s[v]||[],{type:"heading",path:c+(t.slug?`#${t.slug}`:""),display:d}]);for(const o of t.contents){const n=b(o,a);n&&(s[v]=[...s[v]||[],{type:"content",header:t.header,path:c+(t.slug?`#${t.slug}`:""),display:n}])}}}return Object.keys(s).sort((c,l)=>E(s[c])-E(s[l])).map(c=>({title:c,contents:s[c]}))},ye=a=>{const p=I(),h=f([]),s=z(()=>de.value[p.value]),c=Y(l=>{h.value=l?me(l,s.value):[]},re);return le([a,p],()=>{c(a.value)}),h};var fe=$({name:"SearchResult",props:{query:{type:String,required:!0}},emits:{close:()=>!0,updateQuery:a=>!0},setup(a,{emit:p}){const h=_(),s=ee(),c=I(),l=C(ie),{history:i,addHistory:v,removeHistory:m}=he(),t=te(a,"query"),d=ye(t),o=f(0),n=f(0),J=f(),S=z(()=>d.value.length>0),Z=z(()=>d.value[o.value]||null),V=()=>{o.value=o.value>0?o.value-1:d.value.length-1,n.value=Z.value.contents.length-1},W=()=>{o.value=o.value<d.value.length-1?o.value+1:0,n.value=0},B=()=>{n.value<Z.value.contents.length-1?n.value=n.value+1:W()},A=()=>{n.value>0?n.value=n.value-1:V()},O=u=>u.map(r=>ce(r)?r:e(r[0],r[1])),g=u=>{if(u.type==="custom"){const r=ue[u.index]||"$content",[H,R=""]=oe(r)?r[c.value].split("$content"):r.split("$content");return O([H,...u.display,R])}return O(u.display)},G=()=>{o.value=0,n.value=0,p("updateQuery",""),p("close")};return ae(()=>{X("keydown",u=>{if(S.value){if(u.key==="ArrowUp")A();else if(u.key==="ArrowDown")B();else if(u.key==="Enter"){const r=Z.value.contents[n.value];s.path!==r.path&&(v(r),h.push(r.path),G())}}}),F(J.value,{reserveScrollBarGap:!0})}),se(()=>{P()}),()=>e("div",{class:["search-pro-result",{empty:t.value===""?i.value.length===0:!S.value}],ref:J},t.value===""?i.value.length?e("ul",{class:"search-pro-result-list"},e("li",{class:"search-pro-result-list-item"},[e("div",{class:"search-pro-result-title"},l.value.history),i.value.map((u,r)=>e(U,{to:u.path,class:["search-pro-result-item",{active:n.value===r}],onClick:()=>{console.log("click"),G()}},()=>[e(N,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[u.type==="content"&&u.header?e("div",{class:"content-header"},u.header):null,e("div",g(u))]),e("button",{class:"search-pro-close-icon",onClick:H=>{H.preventDefault(),H.stopPropagation(),m(r)}},e(M))]))])):l.value.emptyHistory:S.value?e("ul",{class:"search-pro-result-list"},d.value.map(({title:u,contents:r},H)=>{const R=o.value===H;return e("li",{class:["search-pro-result-list-item",{active:R}]},[e("div",{class:"search-pro-result-title"},u||"Documentation"),r.map((y,K)=>{const k=R&&n.value===K;return e(U,{to:y.path,class:["search-pro-result-item",{active:k,"aria-selected":k}],onClick:()=>{v(y),G()}},()=>[y.type==="content"?null:e(y.type==="title"?Q:y.type==="heading"?j:x,{class:"search-pro-result-type"}),e("div",{class:"search-pro-result-content"},[y.type==="content"&&y.header?e("div",{class:"content-header"},y.header):null,e("div",g(y))])])})])})):l.value.emptyResult)}});export{fe as default};
